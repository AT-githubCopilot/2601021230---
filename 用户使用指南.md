# 视频关键帧提取与宫格合成工具 - 用户使用指南

## 📋 目录

1. [快速启动](#快速启动)
2. [图形界面使用](#图形界面使用)
3. [命令行工具使用](#命令行工具使用)
4. [功能说明](#功能说明)
5. [常见问题](#常见问题)

## 🚀 快速启动

### 方法1：图形界面（推荐）

**启动步骤：**
1. 打开命令行窗口（Windows：Win+R → 输入 `cmd` → 回车）
2. 进入项目目录：
   ```bash
   cd d:\2512201334-traeprojects\2601021230-视频处理工具
   ```
3. 安装依赖（首次使用）：
   ```bash
   py -m pip install -r requirements.txt
   ```
4. 启动图形界面：
   ```bash
   py main.py
   ```

### 方法2：命令行工具

**启动步骤：**
1. 打开命令行窗口
2. 进入项目目录
3. 启动命令行工具：
   ```bash
   py simple_cli.py
   ```

## 🖥️ 图形界面使用

### 界面布局

图形界面分为三个主要区域：

1. **顶部工具栏**
   - 「导入视频」按钮：用于选择视频文件
   - 视频信息显示：显示视频的文件名、分辨率、时长、帧率

2. **左侧控制面板**
   - **关键帧提取设置**：提取数量、图片格式、图片质量、保存路径
   - **宫格合成设置**：宫格布局、图片间距、边框宽度
   - **操作日志**：显示操作过程和结果

3. **右侧预览区**
   - 显示提取的关键帧或合成后的宫格图

### 操作流程

#### 步骤1：导入视频
- 点击左上角的「**导入视频**」按钮
- 在弹出的文件选择框中选择MP4视频文件
- 视频导入成功后，顶部会显示视频信息

#### 步骤2：设置关键帧提取参数
- **提取数量**：设置要提取的关键帧数量（≥2）
- **图片格式**：选择JPG或PNG
- **图片质量**：设置图片质量（仅JPG有效，0-100）
- **保存路径**：点击「**浏览**」选择保存目录

#### 步骤3：提取关键帧
- 点击「**提取关键帧**」按钮
- 等待提取完成（日志区会显示进度）
- 右侧预览区会显示所有提取的关键帧

#### 步骤4：设置宫格合成参数
- **宫格布局**：选择「自动计算」或手动选择模板（2×2/3×3/4×4）
- **图片间距**：设置图片之间的间距（0-20像素）
- **边框宽度**：设置图片边框宽度（0-10像素）

#### 步骤5：合成宫格图
- 点击「**合成宫格图**」按钮
- 等待合成完成
- 右侧预览区会显示合成后的宫格图
- 宫格图会自动保存到指定目录

## 💻 命令行工具使用

命令行工具提供交互式操作，适合新手使用：

1. **启动工具**：`py simple_cli.py`
2. **选择视频**：
   - 工具会自动检测「测试视频」目录中的视频
   - 直接输入序号选择，或输入完整视频路径
3. **设置参数**：
   - 按提示设置提取数量、图片格式、质量、保存路径
4. **提取关键帧**：工具自动提取并保存
5. **合成宫格图**：
   - 输入y确认合成
   - 选择宫格布局和间距
6. **查看结果**：所有输出文件保存在指定目录

## 🎯 功能说明

### 支持的功能

✅ **视频信息解析**：自动获取视频的时长、帧率、分辨率等
✅ **均匀间隔模式**：按指定数量均匀提取关键帧
✅ **多种图片格式**：支持JPG和PNG格式
✅ **宫格合成**：
   - 自动计算最优布局
   - 支持手动选择布局模板
   - 支持自定义间距和边框
✅ **实时预览**：提取和合成结果实时显示

⏳ **开发中功能**：
- 关键场景模式
- 时间点指定模式
- 混合模式
- 批量处理
- 更多个性化定制

### 输出文件

- **关键帧图片**：保存到指定目录，命名格式：`视频文件名_序号.格式`
- **宫格图**：保存到同一目录，命名格式：`视频文件名_宫格图.jpg`

## ❓ 常见问题

### Q1：找不到交互面板
**A1**：交互面板就是图形界面，通过以下方式启动：
   ```bash
   py main.py
   ```

### Q2：提示缺少PyQt5
**A2**：安装PyQt5：
   ```bash
   py -m pip install PyQt5 -i https://pypi.tuna.tsinghua.edu.cn/simple --timeout 120
   ```

### Q3：提取关键帧失败
**A3**：
- 检查视频格式是否为MP4
- 检查视频文件是否损坏
- 尝试降低提取数量

### Q4：宫格图保存在哪里
**A4**：宫格图直接保存在您设置的「保存路径」目录中

## 📁 项目文件说明

- **main.py**：图形界面主程序
- **simple_cli.py**：命令行工具
- **src/**：核心功能代码
- **requirements.txt**：依赖列表
- **README.md**：项目说明
- **快速使用指南.md**：使用说明

## 📞 技术支持

如果遇到问题，可以：
1. 查看操作日志（界面底部）
2. 检查命令行输出的错误信息
3. 尝试使用命令行工具
4. 重新安装依赖

## 📌 下次使用

**下次使用时，直接执行以下步骤：**

1. 打开命令行窗口
2. 进入项目目录
3. 启动图形界面：
   ```bash
   py main.py
   ```

这样就能看到您之前使用的交互面板了！

祝您使用愉快！